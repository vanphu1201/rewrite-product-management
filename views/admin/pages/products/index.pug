extends ../../layouts/default
include ../../mixins/filter-status.pug
include ../../mixins/pagination.pug
include ../../mixins/multi-change.pug
include ../../mixins/alert.pug
block main
  +alertSuccess(5000)
  +alertDanger(5000)
  .card.mb-3
  .card-header Bộ lọc và Tìm kiếm
  .card-body
    .row 
      +filter-status(filterStatus)
      .col-6
        form#form-search
          .input-group
              input(
                type="text" 
                placeholder="Nhập từ khóa" 
                name="keyword" 
                class="form-control" 
                value=`${keyword ? keyword : ""}`
                btn-form-search)
              .input-group-append
                  button(class="btn btn-success" type="submit" input-form-search ) Tìm
  .card.mb-3
    .card-header Danh sách
    .card-body
      .row
        .col-8
          +multiChange()
        .col-4
          a(
          href=`/admin/products/create`
          class="btn btn-outline-success"
          ) + Thêm mới
      table.table.table-hover.table-sm
          thead
            tr
              th
                input(type="checkbox" name="checkall")
              th STT
              th Hình ảnh
              th Tiêu đề
              th Giá
              th Vị trí
              th Trạng thái
              th Hành động
          tbody
            each item, index in products
              tr
                td
                  input(
                      type="checkbox"
                      name="id"
                      value=item.id
                  )
                td #{paginationObject.skip + index + 1}
                  td
                      img(
                          src=item.thumbnail
                          alt=item.title
                          width="100px"
                          height="auto"
                      )
                  td #{item.title}
                  td #{item.price}$
                  td
                    input(
                      type="number"
                      value=item.position
                      style="width: 60px"
                      min="1"
                      name="position"
                    )
                  td
                    if (item.status == "active")
                      a(href="javascript:;" class="badge badge-success" data-status=item.status data-id=item.id) Hoạt động
                    else 
                      a(href="javascript:;" class="badge badge-danger" data-status=item.status data-id=item.id) Dừng hoạt động
                  td
                    button(class="btn btn-warning btn-sm") Sửa
                    button(class="btn btn-danger btn-sm ml-1" delete data-id=item.id) Xóa
  //- pagination
  +pagination(paginationObject)
  //- end pagination


  //- form submit
  form(
        action=""
        method="POST"
        path="/admin/products/change-status"
        form-change-status
  )

  form(
        action=""
        method="POST"
        path="/admin/products/delete"
        form-delete-product
  )